{% extends 'AdminCoreBundle::Common/formComponent.html.twig' %}


{% set elcodi_context = {
  entity_type: 'mailing',
} %}


{% form_theme form 'AdminCoreBundle::Forms/fields.html.twig' %}
  {% block content %}

    {% set formAction = email.id ? path('admin_email_update', { id: email.id }) : path('admin_email_save') %}
      
      {{ form_start(form, { action: formAction}) }}
      <fieldset>
        <div class="grid">
          <div class="col-1-3">
            <div class="box-none">
              <h3 class="fw-n">{{ 'admin.mailing.section.basic.title'|trans }}</h3>
              <p>{{ 'admin.mailing.section.basic.description'|trans }}</p>
              {% if elcodi_languages|length > 1 %}
                <p><i class="icon-star"></i> = {{ 'ui.language.master_language'|trans }}</p>
              {% endif %}
            </div>
          </div>
          <div class="col-2-3">
            <div {% if elcodi_languages|length > 1 %}data-fc-modules="tabs" class="tabs-box loading" {% endif %}>
              {% for language in elcodi_languages %}
                <section id="tab-{{ language }}" data-fc-name="{% if loop.first %}<i class='icon-star'></i> {% endif %}{{ language|capitalize }}">
                  <div class="box">
                    <ol>
                      <li>
                        {{
                        form_row(form.title["#{language}_title"], {
                        label: 'admin.mailing.field.title.title',
                        attr: {
                        placeholder: 'admin.mailing.field.title.placeholder',
                      }
                    })
                  }}
                </li>
                  
                <li>
                  {{'admin.mailing.field.name.title'|trans }}: <span>{{email.name}}</span>
                  {{ form_row(form.name, {
                  label: 'admin.mailing.field.name.title',
                  attr: {
                  placeholder: 'admin.page.field.name.placeholder',
                  'data-fc-modules': 'slug',
                  'data-fc-parent': form.title["#{language}_title"].vars.id
                }
              })
            }}
          </li>
            <li>
              {{ form_row(form.content["#{language}_content"],{
              label: 'admin.mailing.field.content.title',
              attr:{
              placeholder: 'admin.mailing.field.content.placeholder'}}) 
            }}
          </li>

        </ol>
      </div>
    </section>
  {% endfor %}
</div>
</div>
</div>
{% if form.enabled is defined %}
  <div class="grid">
    <div class="col-1-3">
      <div class="box-none mb-n pb-m">
        <h3 class="fw-n">{{ 'admin.page.section.visibility.title'|trans }}</h3>
        <p>Abilita questa email per renderla usabile</p>
      </div>
    </div>
    <div class="col-2-3">
      <div class="box mb-n pb-n">
        <ol class="grid pt-m">
          <li class="col-1-2">
            {{
            form_row(form.enabled, {
            label: 'ui.label.enabled',
          })
        }}
      </li>
    </ol>
  </div>
</div>
</div>
{% endif %}
</fieldset>

<div class="grid fixed-bottom animated fade-in-up">
  <div class="col-1-3">
    &nbsp;
  </div>
  <div class="col-2-3">
    <button type="submit" class="button-primary button-fat pv-s mr-l">{{ 'ui.forms.save'|trans }}</button>
    <a href="{{ path('admin_email_list') }}">{{ 'ui.forms.cancel'|trans }}</a>
  </div>
</div>
{{ form_end(form) }}

{% endblock content %}
